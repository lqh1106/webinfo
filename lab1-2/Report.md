# Lab 1-2 豆瓣数据的个性化检索与推荐

## 实验内容

基于豆瓣 Movie&Book 的 tag 信息、我们提供的豆瓣电影与书的评分记录以及用户间的社交关系，判断用户的偏好，并对用户交互过的 item（电影、书籍）进行（基于得分预测的）排序。

## 实验步骤

### 数据处理

### 评分排序

假定用户偏好不与时间有关，即如果用户给某一类的书籍/电影打高分，我们就认为他会给此类相似的书籍/电影打高分。此处我们给出两种计算预测评分的方法：基于 kNN 的评分预测方法和线性拟合方法。

#### kNN

对于用户评价过的某一本书籍/电影，我们可以找到与其最为相似的 k 本书籍/电影，计算该用户对这 k 本书籍/电影的评分的加权平均值作为预测评分。这里我们使用余弦相似度作为相似度的度量，并作为电影评分的权重。

$$
\text{rating} = \frac{\sum_{i=1}^{k} \text{rating}_i \cdot \text{similarity}_i}{\sum_{i=1}^{k} \text{similarity}_i}
$$

#### 线性拟合

我们将用户对书籍/电影的评分看作是书籍/电影的特征的线性组合，即

$$
\text{rating} = \sum_{i=1}^{n} w_i \cdot \text{feature}_i
$$

此时我们划分训练集和测试集，划分比例为1:9，使用训练集训练线性回归模型，然后使用测试集计算 MSE 和 NDCG。

## 实验结果

我们使用 MSE 和 NDCG 作为评价指标，计算两种方法的结果得到以下表格：

||MSE|NDCG|
|---|---|---|
| kNN | 0.6537304444906865 | 0.7991238148683567 |
| Linear Regression | 0.6429722291005368 | 0.8012059320420349 |

在这里我们可以看到，线性回归的效果略好于 kNN 方法。NDGC 的值在 0.8 左右，说明我们的预测效果还是不错的。

## 实验总结

在这个实验中，我们使用了两种方法对用户的评分进行预测，得到了不错的结果。但是这里我们只使用了用户的评分信息，实际上我们还可以使用用户的社交关系信息，以及时间戳等信息来提高预测的准确性。